---
id: 6210499
title: "è®¢é˜…æ”¯ä»˜ï¼šæ”¯ä»˜å·¨å¤´çš„å¿…äº‰ä¹‹åœ°"
tags: ["æ“ä½œæŒ‡å—", "æ”¯ä»˜å¹³å°", "ç»éªŒåˆ†äº«"]
custom_edit_url: https://www.woshipm.com/pd/6210499.html
---
import { ArticleInfo } from '@site/src/components/ArticleInfo';

<ArticleInfo
    author="æ”¯ä»˜å”§å”§å’‹å’‹"
    authorLink="https://www.woshipm.com/u/1357880"
    published="2025-04-28"
    views={1675}
    comments={1}
    collects={2}
/>

> æ”¯ä»˜å·¨å¤´ä»¬çº·çº·å¸ƒå±€è®¢é˜…æ”¯ä»˜é¢†åŸŸï¼Œè¯•å›¾é€šè¿‡æŠ€æœ¯åˆ›æ–°å’Œä¸šåŠ¡æ‹“å±•æ¥æŠ¢å å¸‚åœºä»½é¢ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è®¢é˜…æ”¯ä»˜çš„ä¸šåŠ¡æµç¨‹ã€é£æ§è¦ç‚¹ã€æŠ€æœ¯å®ç°æ–¹å¼ä»¥åŠä¸»æµæ”¯ä»˜å¹³å°çš„æ¥å£å¯¹æ¯”åˆ†æï¼Œå¸®åŠ©å¤§å®¶å…¨é¢äº†è§£è¿™ä¸€æ”¯ä»˜é¢†åŸŸçš„ç«äº‰æ ¼å±€å’Œå‘å±•è¶‹åŠ¿ã€‚

---

## è®¢é˜…æ”¯ä»˜ï¼šæ”¯ä»˜å·¨å¤´çš„å¿…äº‰ä¹‹åœ°

[![](https://static.woshipm.com/ttw_avatar_20240709211334_2686.jpg?imageView2/1/w/72/h/72/q/100)](https://www.woshipm.com/u/1357880)

[æ”¯ä»˜å”§å”§å’‹å’‹](https://www.woshipm.com/u/1357880) ![](https://static.woshipm.com/tag/1101_1@2x.png) å…³æ³¨

2025-04-28

1 è¯„è®º 1675 æµè§ˆ 2 æ”¶è— 14 åˆ†é’Ÿ

[ğŸ”— äº§å“ç»ç†çš„æ ¸å¿ƒä»·å€¼æ˜¯èƒ½å¤Ÿå‡†ç¡®å‘ç°å’Œæ»¡è¶³ç”¨æˆ·éœ€æ±‚ï¼ŒæŠŠç”¨æˆ·éœ€æ±‚è½¬åŒ–ä¸ºäº§å“åŠŸèƒ½ï¼Œå¹¶åè°ƒèµ„æºæ¨åŠ¨è½åœ°ï¼Œåˆ›é€ å•†ä¸šä»·å€¼](https://ke.qidianla.com/courses/90pm)

> æ”¯ä»˜å·¨å¤´ä»¬çº·çº·å¸ƒå±€è®¢é˜…æ”¯ä»˜é¢†åŸŸï¼Œè¯•å›¾é€šè¿‡æŠ€æœ¯åˆ›æ–°å’Œä¸šåŠ¡æ‹“å±•æ¥æŠ¢å å¸‚åœºä»½é¢ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è®¢é˜…æ”¯ä»˜çš„ä¸šåŠ¡æµç¨‹ã€é£æ§è¦ç‚¹ã€æŠ€æœ¯å®ç°æ–¹å¼ä»¥åŠä¸»æµæ”¯ä»˜å¹³å°çš„æ¥å£å¯¹æ¯”åˆ†æï¼Œå¸®åŠ©å¤§å®¶å…¨é¢äº†è§£è¿™ä¸€æ”¯ä»˜é¢†åŸŸçš„ç«äº‰æ ¼å±€å’Œå‘å±•è¶‹åŠ¿ã€‚

![](https://image.woshipm.com/2023/04/13/47dcd902-d9eb-11ed-bd74-00163e0b5ff3.jpg)

ç›®å½•æ¦‚è§ˆ

*   ä¸»è¦å‚ä¸æ–¹
*   å…¸å‹ä¿¡æ¯æµ
*   é£æ§ä¸åˆè§„è¦ç‚¹
*   æ¡ˆä¾‹ï¼šå¾®ä¿¡æ”¯ä»˜å‘¨æœŸæ‰£è´¹äº§å“ä¸šåŠ¡æµç¨‹
*   å•†æˆ·æ¥å£è°ƒç”¨process
*   è®¢é˜…æ”¯ä»˜çš„UMLæµç¨‹æ¦‚è§ˆ
*   ä¸»æµç«å“æ¥å£å¯¹æ¯”åˆ†æ

## ä¸»è¦å‚ä¸æ–¹

*   **ç”¨æˆ·**ï¼šå°±æ˜¯ä½ æˆ‘è¿™æ ·çš„æ¶ˆè´¹è€…ï¼Œæƒ³è®¢é˜…ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚ä¼šå‘˜ã€è‡ªåŠ¨ç»­è´¹å•¥çš„ï¼Œå°±å¾—å…ˆå‘èµ·è¯·æ±‚ï¼Œæˆæƒæ”¯ä»˜æ–¹å¼ï¼ˆæ¯”å¦‚ç»‘å¡ï¼‰ï¼Œç„¶åç­‰ç€æ¥æ”¶æ‰£æ¬¾é€šçŸ¥ã€‚
*   **å•†æˆ·**ï¼šå°±æ˜¯æä¾›é‚£äº›è®¢é˜…æœåŠ¡çš„å•†å®¶ï¼Œæ¯”å¦‚è§†é¢‘ç½‘ç«™ã€è½¯ä»¶å¼€å‘å•†ã€‚ä»–ä»¬å¾—é…ç½®å¥½è®¢é˜…è®¡åˆ’ï¼Œç­‰æ”¶åˆ°æ”¯ä»˜ç»“æœåï¼Œå°±ç»™ä½ å¼€é€šæœåŠ¡ã€‚
*   **æ”¯ä»˜å…¬å¸ï¼ˆèšåˆæ”¯ä»˜å¹³å°ï¼‰**ï¼šè¿™å¸®å®¶ä¼™å°±åƒæ˜¯æ”¯ä»˜ç•Œçš„â€œä¸­é—´äººâ€ï¼ŒæŠŠå„ç§æ”¯ä»˜æ¸ é“éƒ½é›†æˆèµ·æ¥ã€‚ä»–ä»¬å¾—å¤„ç†è®¢é˜…çš„é‚£äº›äº‹å„¿ï¼Œæ¯”å¦‚å‘¨æœŸæ€§æ‰£æ¬¾ã€æ‰£æ¬¾å¤±è´¥äº†å’‹åŠï¼Œè¿˜å¾—è´Ÿè´£èµ„é‡‘æ¸…ç®—å’Œå¯¹è´¦ã€‚
*   **é“¶è¡Œ/å¡ç»„ç»‡**ï¼šä»–ä»¬æ˜¯â€œçœŸé‡‘ç™½é“¶â€çš„æ¬è¿å·¥ï¼Œè´Ÿè´£å®é™…çš„èµ„é‡‘åˆ’è½¬ï¼Œè¿˜æä¾›ä»£æ”¶ä»˜æ¥å£å’Œé£æ§æ”¯æŒã€‚
*   **ç¬¬ä¸‰æ–¹æœåŠ¡å•†**ï¼šæ¯”å¦‚ WildCardï¼ˆè™šæ‹Ÿå¡ï¼‰ã€Stripeï¼ˆæ”¯ä»˜ç½‘å…³ï¼‰è¿™äº›ï¼Œä»–ä»¬åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œç»™æ”¯ä»˜èƒ½åŠ›â€œåŠ æŠŠåŠ²â€ã€‚

## å…¸å‹ä¿¡æ¯æµ

### è®¢é˜…å‘èµ·é˜¶æ®µ

ç”¨æˆ·ï¼ˆå°±æ˜¯ä½ å’¯ï¼‰åœ¨å‰ç«¯é¡µé¢ä¸Šé€‰å¥½è®¢é˜…è®¡åˆ’ï¼Œç„¶åæˆæƒæ”¯ä»˜æ–¹å¼ï¼ˆæ¯”å¦‚å¡«ä¸ªè™šæ‹Ÿå¡ä¿¡æ¯ï¼‰ã€‚

æ”¯ä»˜å…¬å¸å°±ä¼šè°ƒç”¨é“¶è¡Œæˆ–æ”¯ä»˜ç½‘å…³çš„ APIï¼Œç”Ÿæˆä¸€ä¸ªè®¢é˜…åè®®ï¼ˆæ¯”å¦‚ PayPal çš„ Billing Agreementï¼‰ï¼Œé¡ºä¾¿æŠŠæ‰£æ¬¾å‘¨æœŸå’Œé‡‘é¢ç»™è®°ä¸‹æ¥ã€‚

[![](https://image.woshipm.com/2023/08/02/58dc678c-30e3-11ee-88e7-00163e0b5ff3.png)

ä¸€æ¬¾äº§å“æ— åˆ°æœ‰ï¼Œäº§å“ç»ç†éœ€è¦åšäº›ä»€ä¹ˆï¼Ÿ

åœ¨ä¸€ä¸ªäº§å“ä»æ— åˆ°æœ‰çš„è¿‡ç¨‹ä¸­ï¼Œè¦åšå¥½äº§å“ç»ç†è¿™ä¸ªè§’è‰²å®åœ¨æ˜¯ä¸å®¹æ˜“ï¼Œé™¤äº†å¤§å®¶éƒ½çŸ¥é“çš„å†™éœ€æ±‚ã€å†™éœ€æ±‚ã€å†™éœ€æ±‚ï¼Œè¦åšçš„äº‹å¤šç€å‘¢ã€‚äº§å“ç»ç†ä¸æ˜¯ä½ çœ¼ä¸­çš„åªä¼šæ‰¾ä½ éº»çƒ¦ï¼Œæè¦æ±‚..

æŸ¥çœ‹è¯¦æƒ… >

](https://ke.qidianla.com/courses/bcpm)

å•†æˆ·æ”¶åˆ°è®¢é˜… ID åï¼Œå°±ä¼šç»™ä½ å¼€é€šæœåŠ¡æƒé™ï¼Œä½ å°±èƒ½å¼€å§‹äº«å—æœåŠ¡å•¦ã€‚

### å‘¨æœŸæ€§æ‰£æ¬¾é˜¶æ®µ

åˆ°äº†è¯¥æ‰£æ¬¾çš„æ—¶å€™ï¼Œæ”¯ä»˜å…¬å¸å°±ä¼šæŒ‰å‘¨æœŸè§¦å‘æ‰£æ¬¾è¯·æ±‚ï¼Œé€šè¿‡é“¶è¡Œæˆ–å¡ç»„ç»‡æŠŠé’±åˆ’èµ°ã€‚

æ‰£æ¬¾ç»“æœä¼šé€šè¿‡ Webhook é€šçŸ¥å•†æˆ·ï¼ˆæˆåŠŸäº†å°±ç»§ç»­æœåŠ¡ï¼Œå¤±è´¥äº†å°±æé†’ä¸€ä¸‹ï¼Œå…·ä½“ç»†èŠ‚æµç¨‹è§ä¸‹æ–‡ï¼šè®¢é˜…æ”¯ä»˜UMLæµç¨‹ï¼‰ã€‚ç”¨æˆ·ï¼ˆè¿˜æ˜¯ä½ ï¼‰ä¼šæ”¶åˆ°æ‰£æ¬¾é€šçŸ¥ï¼Œè¿˜èƒ½é€šè¿‡æ”¯ä»˜å…¬å¸æˆ–å•†æˆ·å¹³å°ç®¡ç†è®¢é˜…çŠ¶æ€ï¼Œæ¯”å¦‚æŸ¥çœ‹ã€ä¿®æ”¹æˆ–è€…å–æ¶ˆè®¢é˜…ã€‚

### å¼‚å¸¸å¤„ç†é˜¶æ®µ

**æ”¯ä»˜å¤±è´¥**ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨å°è¯•é‡è¯•ï¼Œè¦æ˜¯è¿˜æ˜¯ä¸è¡Œï¼Œå°±æš‚åœæœåŠ¡ã€‚è¿™æ—¶å€™ï¼Œå¾—æŠŠå¤±è´¥åŸå› ï¼ˆæ¯”å¦‚ä½™é¢ä¸è¶³ã€é£æ§æ‹¦æˆªï¼‰è®°å½•ä¸‹æ¥ï¼Œå¹¶ä¸”é€šçŸ¥ç”¨æˆ·ï¼ˆè¿˜æ˜¯ä½ ï¼‰ã€‚åç»­å¦‚èƒ½æ‰£åˆ°æ¬¾æ˜¯å¦æ”¯æŒæ¢å¤æœåŠ¡ï¼Ÿ

**å–æ¶ˆè®¢é˜…**ï¼šè¦æ˜¯ç”¨æˆ·ï¼ˆä½ ï¼‰ä¸æƒ³è®¢é˜…äº†ï¼Œå‘èµ·å–æ¶ˆè¯·æ±‚åï¼Œæ”¯ä»˜å…¬å¸å°±ä¼šç»ˆæ­¢æ‰£æ¬¾è®¡åˆ’ï¼Œå¹¶ä¸”æŠŠçŠ¶æ€åŒæ­¥ç»™å•†æˆ·ã€‚

**ä¸šåŠ¡æ–¹é¢ï¼š**

å¦‚æ‰£æ¬¾å‘¨æœŸå·²è¿‡ï¼Œä»ç„¶æ²¡æœ‰æ‰£æ¬¾æˆåŠŸï¼Œæ˜¯å¦ç«‹å³åœæ­¢ç”¨æˆ·çš„æœåŠ¡ï¼Œå…·ä½“ä¸šåŠ¡åœºæ™¯æªæ–½è‚¯å®šä¸åŒï¼Ÿ

**æ›´æ”¹è®¢é˜…è®¡åˆ’ï¼š**

*   æ­£å¥½åœ¨æ‰£æ¬¾ç­‰å¾…æœŸæ›´æ”¹è®¢é˜…è®¡åˆ’ï¼Œå¦‚è®¢å•é‡‘é¢å’Œå‘¨æœŸï¼Œå¦‚ä½•å¤„ç†ã€‚
*   æ‰£æ¬¾ç­‰å¾…æœŸæ˜¯å¦å…è®¸ä¿®æ”¹ï¼Œæˆ–è€…æ˜¯å¦éœ€è¦å®šä¹‰æ‰£æ¬¾ç­‰å¾…æœŸçš„å˜æ›´è®¡åˆ’ä¸‹æœˆç”Ÿæ•ˆï¼Ÿ

**Webhookæ¶ˆæ¯ä¸¢å¤±**

å•†æˆ·ç³»ç»Ÿæ£€æµ‹åˆ°è®¢é˜…ä¸€ç›´å¤„äºpendingçŠ¶æ€ï¼ˆè¶…è¿‡30åˆ†é’Ÿï¼‰ã€‚

è°ƒç”¨æ”¯ä»˜å¹³å°æä¾›çš„ã€Œè®¢é˜…çŠ¶æ€æŸ¥è¯¢æ¥å£ã€ä¸»åŠ¨è¡¥å¿ï¼š

> GET /v1/subscriptions/{subscription\_id}
> 
> Response:
> 
> {
> 
> â€œstatusâ€: â€œactiveâ€,
> 
> â€œlast\_payment\_timeâ€:
> 
> â€œ2024-05-20 14:00:00â€
> 
> }

æ ¹æ®æŸ¥è¯¢ç»“æœæ›´æ–°æœ¬åœ°çŠ¶æ€ï¼Œå¹¶è¡¥å‘ç”¨æˆ·é€šçŸ¥ã€‚

### é£æ§ä¸åˆè§„è¦ç‚¹

*   **åæ¬ºè¯ˆ**ï¼šæ”¯ä»˜å…¬å¸ä¼šç»“åˆ IP æ£€æµ‹ã€äº¤æ˜“è¡Œä¸ºåˆ†æï¼ˆæ¯”å¦‚æœ‰æ²¡æœ‰é«˜é¢‘å°é¢æ‰£æ¬¾è¿™ç§å¼‚å¸¸è¡Œä¸ºï¼‰æ¥æ‹¦æˆªå¼‚å¸¸äº¤æ˜“ã€‚åƒ WildCard è¿™ç§ï¼Œè¿˜ä¼šé’ˆå¯¹é«˜é£æ§å¹³å°ï¼ˆæ¯”å¦‚ OpenAIï¼‰ä¼˜åŒ–æ”¯ä»˜æ¸ é“ã€‚
*   **æ•°æ®éšç§**ï¼šå¤§å®¶éƒ½å¾—éµå¾ª GDPR è¿™äº›æ³•è§„ï¼ŒæŠŠç”¨æˆ·æ”¯ä»˜ä¿¡æ¯åŠ å¯†å­˜å‚¨å¥½ã€‚å°¤å…¶æ˜¯è™šæ‹Ÿå¡æœåŠ¡ï¼Œå¾—æ³¨æ„åˆ«è®©æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼ˆæ¯”å¦‚ WildCard å°±æ²¡æœ‰ KYC é€‰é¡¹ï¼‰ã€‚
*   **èµ„é‡‘å­˜ç®¡**ï¼šæ”¯ä»˜å…¬å¸è¦å’Œé“¶è¡Œåˆä½œï¼Œå®ç°èµ„é‡‘åˆ†è´¦ï¼Œç¡®ä¿å•†æˆ·ç»“ç®—åˆè§„ï¼Œåˆ«å‡ºç°ä»€ä¹ˆäºŒæ¸…é£é™©ã€‚

## æ¡ˆä¾‹ï¼šå¾®ä¿¡æ”¯ä»˜å‘¨æœŸæ‰£è´¹äº§å“ä¸šåŠ¡æµç¨‹

ä¸‹å‘æ‰£è´¹å‰é€šçŸ¥åï¼Œåœ¨çº¦å®šæ—¶é—´å†…ï¼š

*   è‹¥ç”¨æˆ·æ‹’ç»ç»­è´¹ï¼Œ**å¯å…³é—­æ‰£è´¹æœåŠ¡**
*   è‹¥ç”¨æˆ·æ¥å—ç»­è´¹ï¼Œåˆ™æ— éœ€é¢å¤–æ“ä½œ

æ³¨æ„ï¼šç›®å‰æ”¯æŒé€šçŸ¥å24å°æ—¶è‡ªåŠ¨æ‰£è´¹ã€æˆ–æå‰ä½¿ç”¨ç‹¬ç«‹çš„é€šçŸ¥æ¥å£ä¸¤ç§æ¨¡å¼ã€‚ï¼ˆ**æ”¯ä»˜ä¸­ç­¾çº¦ï¼špay/contractorderæ˜¯ç‹¬ç«‹æ¥å£ï¼Œä»¥ä¸‹æ‰£æ¬¾è§„åˆ™åªé€‚ç”¨äºç”³è¯·æ‰£æ¬¾æ¥å£ï¼špay/pappayapplyï¼Œä¸¤ç§æ¨¡å¼åªèƒ½äºŒé€‰ä¸€ï¼‰**

![](https://image.woshipm.com/2025/04/27/f354e120-2369-11f0-964f-00163e09d72f.png)

## å¾®ä¿¡å‘¨æœŸæ‰£è´¹å•†æˆ·æ¥å£è°ƒç”¨æµç¨‹

1ï¼‰å•†æˆ·åœ¨1å·è°ƒç”¨é¢„æ‰£è´¹é€šçŸ¥ã€‚

2ï¼‰2å·ä¸ºæ‰£è´¹ç­‰å¾…æœŸï¼Œå•†æˆ·ä¸å¯æ‰£è´¹ï¼Œç”¨æˆ·å¯éšæ—¶å…³é—­ã€‚

3ï¼‰3ï½9å·å…±7å¤©ä¸ºå¯æ‰£è´¹æœŸ

*   *   æ‰£è´¹æœŸå†…ä»…åœ¨æ¯å¤©7:00ï½22:00æœŸé—´å¯ä»¥å‘èµ·æ‰£è´¹
    *   æ‰£è´¹æœŸå†…å¯å¤šæ¬¡å°è¯•æ‰£è´¹
    *   æ‰£è´¹æœŸå†…å®æ—¶æ‰£è´¹
    *   æ‰£è´¹å¤±è´¥ç”¨æˆ·æ— æ„ŸçŸ¥
    *   æ‰£è´¹æˆåŠŸåç”¨æˆ·å¯æ”¶åˆ°æ‰£è´¹å‡­è¯ï¼Œæ‰£è´¹æˆåŠŸåï¼Œå½“å‰å‘¨æœŸæå‰ç»“æŸ

## è®¢é˜…æ”¯ä»˜çš„å®ç°æ–¹å¼

### 1\. æŠ€æœ¯é›†æˆæ–¹æ¡ˆ

*   **æ”¯ä»˜SDK/APIå¯¹æ¥**ï¼šé€šè¿‡**é›†æˆæ”¯ä»˜ç½‘å…³**ï¼ˆå¦‚Stripeã€PayPalï¼‰æˆ–**é“¶è¡Œæä¾›çš„è®¢é˜…æ¥å£ï¼Œå®ç°å‘¨æœŸæ€§æ‰£æ¬¾**ã€‚ä¾‹å¦‚ï¼ŒLaravel Cashieré€šè¿‡Stripe APIç®¡ç†è®¢é˜…è®¡åˆ’ï¼Œæ”¯æŒåˆ›å»ºã€å–æ¶ˆè®¢é˜…åŠå¤„ç†å¤±è´¥æ”¯ä»˜ã€‚
*   **æ™ºèƒ½åˆçº¦ä¸åŒºå—é“¾**ï¼šåŸºäºCardanoçš„Revutoå¹³å°åˆ©ç”¨æ™ºèƒ½åˆçº¦è‡ªåŠ¨æ‰§è¡Œè®¢é˜…æ‰£æ¬¾ï¼Œç”¨æˆ·å¯é€šè¿‡è´¨æŠ¼ä»£å¸ï¼ˆå¦‚REVUï¼‰æˆ–ç¨³å®šå¸ï¼ˆEURRï¼‰æ”¯ä»˜ï¼ŒåŒæ—¶å¼•å…¥DeFiå€Ÿè´·åŠŸèƒ½é™ä½è´¹ç”¨ã€‚
*   **è™šæ‹Ÿå¡è§£å†³æ–¹æ¡ˆ**ï¼šé’ˆå¯¹è·¨å¢ƒæ”¯ä»˜åœºæ™¯ï¼ŒWildCardç­‰è™šæ‹Ÿå¡æœåŠ¡æ”¯æŒç»‘å®šå›½é™…è®¢é˜…å¹³å°ï¼ˆå¦‚Patreonã€ChatGPT Plusï¼‰ï¼Œé€šè¿‡æ”¯ä»˜å®/å¾®ä¿¡å……å€¼ï¼Œè§„é¿å›½å†…é“¶è¡Œå¡é™åˆ¶ã€‚

### 2\. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

*   **è®¢é˜…è®¡åˆ’ç®¡ç†**ï¼šæ”¯æŒçµæ´»è®¾ç½®å‘¨æœŸï¼ˆæœˆ/å­£/å¹´ï¼‰ã€ä»·æ ¼é˜¶æ¢¯åŠè¯•ç”¨æœŸï¼Œä¾‹å¦‚PayPaléœ€æå‰24å°æ—¶åˆ›å»ºè®¢é˜…åè®®å¹¶è®¾ç½®é¦–æ¬¡æ‰£æ¬¾è´¹ç”¨7ã€‚
*   **æ”¯ä»˜å¤±è´¥å¤„ç†**ï¼šè‡ªåŠ¨è§¦å‘é‚®ä»¶æé†’ã€é‡è¯•æ‰£æ¬¾æˆ–å†»ç»“æœåŠ¡ï¼Œéœ€ç»“åˆWebhookæ¥æ”¶æ”¯ä»˜çŠ¶æ€é€šçŸ¥ï¼ˆå¦‚PAYMENT.SALE.COMPLETEDï¼‰7ã€‚
*   **åˆè§„ä¸ç”¨æˆ·é€šçŸ¥**ï¼šæ ¹æ®ã€Šæ¶ˆè´¹è€…æƒç›Šä¿æŠ¤æ³•å®æ–½æ¡ä¾‹ã€‹ï¼Œéœ€æ˜¾è‘—æé†’è‡ªåŠ¨ç»­è´¹æ¡æ¬¾ï¼Œå¹¶åœ¨æ‰£æ¬¾å‰é€šè¿‡å¤šé€šé“ï¼ˆçŸ­ä¿¡ã€é‚®ä»¶ï¼‰é€šçŸ¥ç”¨æˆ·

## ä¸»æµç«å“æ¥å£å¯¹æ¯”åˆ†æ

### Stripeè®¢é˜…æ”¯ä»˜æ¥å£

**æ¥å£åŠŸèƒ½**ï¼šæ”¯æŒåˆ›å»ºè®¢é˜…è®¡åˆ’ã€å‘¨æœŸæ€§æ‰£æ¬¾ã€è¯•ç”¨æœŸè®¾ç½®åŠå¤±è´¥é‡è¯•ã€‚

**æ ¸å¿ƒè¯·æ±‚å‚æ•°**ï¼š

*   customerï¼ˆå¿…å¡«ï¼‰ï¼šç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼Œéœ€é€šè¿‡åˆ›å»ºå®¢æˆ·æ¥å£è·å–ã€‚
*   items\[price\]ï¼ˆå¿…å¡«ï¼‰ï¼šè®¢é˜…è®¡åˆ’ä»·æ ¼IDï¼Œéœ€é¢„å…ˆåœ¨Stripeåå°é…ç½®ã€‚
*   payment\_behaviorï¼šæ§åˆ¶é¦–æ¬¡æ‰£æ¬¾è¡Œä¸ºï¼ˆå¦‚å…è®¸å¤±è´¥åè‡ªåŠ¨é‡è¯•ï¼‰ã€‚
*   trial\_period\_daysï¼šè¯•ç”¨æœŸå¤©æ•°ã€‚

**å“åº”å‚æ•°**ï¼š

*   idï¼šè®¢é˜…IDï¼Œç”¨äºåç»­ç®¡ç†ã€‚
*   statusï¼šè®¢é˜…çŠ¶æ€ï¼ˆå¦‚activeã€past\_dueï¼‰ã€‚
*   current\_period\_start/endï¼šå½“å‰è®¡è´¹å‘¨æœŸèµ·æ­¢æ—¶é—´ã€‚

**è°ƒç”¨æµç¨‹**ï¼š

1.  ç”¨æˆ·é€‰æ‹©è®¢é˜…è®¡åˆ’å¹¶æˆæƒæ”¯ä»˜ã€‚
2.  å•†æˆ·è°ƒç”¨POST /v1/subscriptionsåˆ›å»ºè®¢é˜…ã€‚
3.  StripeéªŒè¯æ”¯ä»˜æ–¹å¼å¹¶ç”Ÿæˆé¦–æ¬¡æ‰£æ¬¾ã€‚
4.  å•†æˆ·é€šè¿‡Webhookæ¥æ”¶invoice.payment\_succeededäº‹ä»¶æ›´æ–°è®¢é˜…çŠ¶æ€ã€‚

### PayPalå®šæœŸä»˜æ¬¾æ¥å£

**æ¥å£åŠŸèƒ½**ï¼šæ”¯æŒå›ºå®šå‘¨æœŸæ‰£æ¬¾ã€è´¦å•åè®®ç®¡ç†ã€‚

**æ ¸å¿ƒè¯·æ±‚å‚æ•°**ï¼š

*   plan\_idï¼ˆå¿…å¡«ï¼‰ï¼šè®¢é˜…è®¡åˆ’IDï¼Œéœ€é€šè¿‡äº§å“åˆ›å»ºæ¥å£ç”Ÿæˆã€‚
*   subscriberï¼šç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚é‚®ç®±ã€å§“åï¼‰ã€‚
*   application\_contextï¼šå®šä¹‰æ”¯ä»˜æµç¨‹çš„è¿”å›URLåŠå–æ¶ˆé¡µé¢ã€‚

**å“åº”å‚æ•°**ï¼š

*   subscription\_idï¼šè®¢é˜…å”¯ä¸€æ ‡è¯†ã€‚
*   statusï¼šçŠ¶æ€ç ï¼ˆå¦‚APPROVAL\_PENDINGã€ACTIVEï¼‰ã€‚
*   linksï¼šåŒ…å«ç”¨æˆ·æˆæƒæ”¯ä»˜çš„è·³è½¬é“¾æ¥ã€‚

**è°ƒç”¨æµç¨‹ï¼š**

1.  å•†æˆ·è°ƒç”¨POST /v1/billing/plansåˆ›å»ºè®¢é˜…è®¡åˆ’ã€‚
2.  ç”¨æˆ·é€šè¿‡æˆæƒé“¾æ¥å®Œæˆæ”¯ä»˜æˆæƒã€‚
3.  PayPalé€šè¿‡Webhooké€šçŸ¥å•†æˆ·æ¿€æ´»è®¢é˜…ã€‚
4.  å‘¨æœŸæ€§æ‰£æ¬¾è‡ªåŠ¨æ‰§è¡Œï¼Œå•†æˆ·ç›‘å¬PAYMENT.SALE.COMPLETEDäº‹ä»¶ã€‚

### æ”¯ä»˜å®è‡ªåŠ¨æ‰£æ¬¾æ¥å£ï¼ˆalipay.fund.auth.order.app.freezeï¼‰

**æ¥å£åŠŸèƒ½**ï¼šåŸºäºé¢„æˆæƒåè®®å®ç°å®šæœŸæ‰£æ¬¾ã€‚

**æ ¸å¿ƒè¯·æ±‚å‚æ•°**ï¼š

*   out\_order\_noï¼ˆå¿…å¡«ï¼‰ï¼šå•†æˆ·è®¢å•å·ï¼Œéœ€å”¯ä¸€ã€‚
*   auth\_codeï¼šç”¨æˆ·æˆæƒç ï¼ˆé€šè¿‡æ‰«ç æˆ–SDKè·å–ï¼‰ã€‚
*   product\_codeï¼šå›ºå®šä¸ºPRE\_AUTHã€‚
*   amountï¼šé¢„æˆæƒé‡‘é¢ã€‚

**å“åº”å‚æ•°**ï¼š

*   auth\_noï¼šæ”¯ä»˜å®èµ„é‡‘æˆæƒå·ã€‚
*   statusï¼šæˆæƒçŠ¶æ€ï¼ˆå¦‚SUCCESSï¼‰ã€‚
*   gmt\_transï¼šæˆæƒæ—¶é—´æˆ³ã€‚

**è°ƒç”¨æµç¨‹**ï¼š

### å¾®ä¿¡æ”¯ä»˜åˆçº¦æ”¯ä»˜æ¥å£

**æ¥å£åŠŸèƒ½**ï¼šæ”¯æŒæŒ‰å‘¨æœŸæˆ–æŒ‰æ¬¡æ‰£æ¬¾ï¼Œé€‚ç”¨äºä¼šå‘˜è®¢é˜…ã€‚

**æ ¸å¿ƒè¯·æ±‚å‚æ•°**ï¼š

*   contract\_idï¼ˆå¿…å¡«ï¼‰ï¼šç­¾çº¦åè®®å·ï¼Œé€šè¿‡ç”¨æˆ·æˆæƒè·å–ã€‚
*   bodyï¼šè®¢å•æè¿°ï¼ˆå¦‚â€œæœˆåº¦ä¼šå‘˜è´¹â€ï¼‰ã€‚
*   total\_feeï¼šæ‰£æ¬¾é‡‘é¢ï¼ˆå•ä½ï¼šåˆ†ï¼‰ã€‚

**å“åº”å‚æ•°**ï¼š

*   transaction\_idï¼šå¾®ä¿¡æ”¯ä»˜è®¢å•å·ã€‚
*   time\_endï¼šæ”¯ä»˜å®Œæˆæ—¶é—´ã€‚
*   trade\_stateï¼šäº¤æ˜“çŠ¶æ€ï¼ˆå¦‚SUCCESSï¼‰ã€‚

**è°ƒç”¨æµç¨‹**ï¼š

## æ¥å£æ–‡æ¡£è®¾è®¡å…³é”®ç‚¹

### å¹‚ç­‰æ€§å¤„ç†

*   **Tokenæœºåˆ¶**ï¼šé€šè¿‡å”¯ä¸€è¯·æ±‚IDï¼ˆå¦‚idempotency\_keyï¼‰é¿å…é‡å¤æ‰£æ¬¾ï¼Œéœ€åœ¨è¯·æ±‚å¤´æˆ–å‚æ•°ä¸­ä¼ é€’ã€‚
*   **æ•°æ®åº“çº¦æŸ**ï¼šåœ¨æ‰£æ¬¾é€»è¾‘ä¸­ä½¿ç”¨update â€¦ where status=unpaidç¡®ä¿ä»…å¤„ç†ä¸€æ¬¡æ‰£æ¬¾ã€‚

### æœ‰å®¹é”™èƒ½åŠ›çš„åºåˆ—è®¾è®¡

> ç”¨æˆ· -> å•†æˆ·ç³»ç»Ÿ: é€‰æ‹©è®¢é˜…è®¡åˆ’å¹¶æ”¯ä»˜
> 
> å•†æˆ·ç³»ç»Ÿ -> æ”¯ä»˜å¹³å°: è°ƒç”¨åˆ›å»ºè®¢é˜…æ¥å£ï¼ˆæºå¸¦idempotency\_keyï¼‰
> 
> æ”¯ä»˜å¹³å° -> æ”¯ä»˜å¹³å°: æ ¡éªŒå¹‚ç­‰æ€§ï¼ˆé€šè¿‡idempotency\_keyï¼‰
> 
> æ”¯ä»˜å¹³å° -> é“¶è¡Œ: éªŒè¯æ”¯ä»˜æ–¹å¼å¹¶æ‰£æ¬¾
> 
> alt æ‰£æ¬¾æˆåŠŸ
> 
> æ”¯ä»˜å¹³å° â€“> å•†æˆ·ç³»ç»Ÿ: è¿”å›{â€œcodeâ€:0, â€œsubscription\_idâ€:â€sub\_123â€³, â€œstatusâ€:â€pendingâ€}
> 
> æ”¯ä»˜å¹³å° -> å•†æˆ·ç³»ç»Ÿ: Webhookå‘é€PAYMENT\_SUCCESSäº‹ä»¶
> 
> å•†æˆ·ç³»ç»Ÿ -> å•†æˆ·ç³»ç»Ÿ: æ›´æ–°çŠ¶æ€ä¸ºactiveï¼Œå¼€é€šæœåŠ¡
> 
> å•†æˆ·ç³»ç»Ÿ -> ç”¨æˆ·: å‘é€æˆåŠŸé‚®ä»¶
> 
> else æ‰£æ¬¾å¤±è´¥
> 
> æ”¯ä»˜å¹³å° â€“> å•†æˆ·ç³»ç»Ÿ: è¿”å›{â€œcodeâ€:2001, â€œmessageâ€:â€ä½™é¢ä¸è¶³â€}
> 
> æ”¯ä»˜å¹³å° -> æ”¯ä»˜å¹³å°: è®°å½•å¾…é‡è¯•ä»»åŠ¡ï¼ˆå®šæ—¶è§¦å‘ï¼‰
> 
> loop é‡è¯•é€»è¾‘ï¼ˆæœ€å¤š3æ¬¡ï¼‰
> 
> æ”¯ä»˜å¹³å° -> é“¶è¡Œ: é‡è¯•æ‰£æ¬¾
> 
> alt é‡è¯•æˆåŠŸ
> 
> æ”¯ä»˜å¹³å° -> å•†æˆ·ç³»ç»Ÿ: Webhookå‘é€PAYMENT\_SUCCESSäº‹ä»¶
> 
> else é‡è¯•å¤±è´¥
> 
> æ”¯ä»˜å¹³å° -> å•†æˆ·ç³»ç»Ÿ: Webhookå‘é€PAYMENT\_FAILEDäº‹ä»¶

æœ¬æ–‡ç”± @æ”¯ä»˜å”§å”§å’‹å’‹ åŸåˆ›å‘å¸ƒäºäººäººéƒ½æ˜¯äº§å“ç»ç†ã€‚æœªç»ä½œè€…è®¸å¯ï¼Œç¦æ­¢è½¬è½½

é¢˜å›¾æ¥è‡ªUnsplashï¼ŒåŸºäºCC0åè®®

è¯¥æ–‡è§‚ç‚¹ä»…ä»£è¡¨ä½œè€…æœ¬äººï¼Œäººäººéƒ½æ˜¯äº§å“ç»ç†å¹³å°ä»…æä¾›ä¿¡æ¯å­˜å‚¨ç©ºé—´æœåŠ¡

èµèµ æ”¶è—å·²æ”¶è—2 ç‚¹èµå·²èµ1

æ›´å¤šç²¾å½©å†…å®¹ï¼Œè¯·å…³æ³¨äººäººéƒ½æ˜¯äº§å“ç»ç†å¾®ä¿¡å…¬ä¼—å·æˆ–ä¸‹è½½App

[æ“ä½œæŒ‡å—](https://www.woshipm.com/tag/%e6%93%8d%e4%bd%9c%e6%8c%87%e5%8d%97)[æ”¯ä»˜å¹³å°](https://www.woshipm.com/tag/%e6%94%af%e4%bb%98%e5%b9%b3%e5%8f%b0)[ç»éªŒåˆ†äº«](https://www.woshipm.com/tag/%e7%bb%8f%e9%aa%8c%e5%88%86%e4%ba%ab)

[åˆ†äº«åˆ°å¾®åš](https://service.weibo.com/share/share.php?appkey=2775287854&title=è®¢é˜…æ”¯ä»˜ï¼šæ”¯ä»˜å·¨å¤´çš„å¿…äº‰ä¹‹åœ°&url=https://www.woshipm.com/pd/6210499.html&pic=https://image.woshipm.com/2023/04/13/47dcd902-d9eb-11ed-bd74-00163e0b5ff3.jpg)

å¾®ä¿¡æ‰«ä¸€æ‰«

![å¾®ä¿¡äºŒç»´ç ](https://api.pwmqr.com/qrcode/create/?url=https://www.woshipm.com/pd/6210499.html)

åˆ†äº«